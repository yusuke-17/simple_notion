#!/usr/bin/env sh

# PATHã‚’æ˜ç¤ºçš„ã«è¨­å®šï¼ˆnodeã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼‰
export PATH="$HOME/.nvm/versions/node/$(nvm version)/bin:$HOME/.nodenv/shims:$HOME/.volta/bin:/usr/local/bin:/usr/bin:/bin:$PATH"

# Simple Notion pre-commit hook with lint-staged
echo "ğŸ” Running lint-staged pre-commit checks..."

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚¹ãƒ†ãƒ¼ã‚¸ã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
FRONTEND_STAGED=$(git diff --cached --name-only | grep "^frontend/" || true)

if [ -n "$FRONTEND_STAGED" ]; then
    echo "Frontend files detected, running lint-staged..."
    # frontendãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦lint-stagedã‚’å®Ÿè¡Œ
    cd frontend
    npx lint-staged
    cd ..
else
    echo "No frontend files staged, skipping lint-staged"
fi

# åŸºæœ¬çš„ãªpre-commitãƒã‚§ãƒƒã‚¯ã‚‚å®Ÿè¡Œ
if [ -x ".git/hooks/pre-commit" ]; then
    echo "Running additional pre-commit checks..."
    .git/hooks/pre-commit
fi